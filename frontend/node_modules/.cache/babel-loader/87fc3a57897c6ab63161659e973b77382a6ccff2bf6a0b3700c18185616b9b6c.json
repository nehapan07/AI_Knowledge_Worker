{"ast":null,"code":"import _objectSpread from\"C:/Users/91798/OneDrive/Desktop/Documents/worker_AII/worker_AII/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{getAuth,onAuthStateChanged,signOut,createUserWithEmailAndPassword,signInWithEmailAndPassword,sendPasswordResetEmail,sendEmailVerification}from\"firebase/auth\";import{collection,addDoc,query,onSnapshot}from\"firebase/firestore\";import{db}from'./firebase-config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const auth=getAuth();const appId=\"1:431921606057:web:30852dac5f99835792e8b8\";// Use the appId from firebase-config.js\n// --- Helper & UI Components ---\nconst Card=_ref=>{let{children,className=''}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800/50 backdrop-blur-sm border border-slate-700 rounded-xl shadow-lg p-6 \".concat(className),children:children});};const SectionTitle=_ref2=>{let{title,description}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-slate-100\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-400 mt-1\",children:description})]});};const PrimaryButton=_ref3=>{let{onClick,children,isLoading,isDisabled=false,className='',type='button'}=_ref3;return/*#__PURE__*/_jsx(\"button\",{type:type,onClick:onClick,disabled:isLoading||isDisabled,className:\"w-full flex justify-center items-center bg-indigo-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:bg-indigo-700 disabled:bg-indigo-400/50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-gray-900 transition-all duration-300 \".concat(className),children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Processing...\"]}):children});};const FormattedAiAnalysis=_ref4=>{let{analysis,placeholder}=_ref4;if(!analysis||!analysis.summary){return/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-500 h-full flex items-center justify-center text-center p-4\",children:placeholder});}const{summary,insights,query}=analysis;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-slate-100 mb-6 border-b border-slate-700 pb-3\",children:[\"Analysis for: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-indigo-400\",children:query})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-indigo-400 mr-3\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-slate-200\",children:\"Summary\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 leading-relaxed pl-9\",children:summary})]}),insights&&insights.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-indigo-400 mr-3\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-slate-200\",children:\"Key Insights\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-4 pl-9\",children:insights.map((insight,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-indigo-500/20 text-indigo-300 font-bold rounded-full h-6 w-6 flex items-center justify-center mr-4 mt-0.5 flex-shrink-0\",children:index+1}),/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-300\",children:insight})]},index))})]})]});};const Notification=_ref5=>{let{message,show,onEnd,type='success'}=_ref5;const[visible,setVisible]=useState(false);const bgColor=type==='success'?'bg-green-500/80':'bg-red-500/80';const borderColor=type==='success'?'border-green-400':'border-red-400';useEffect(()=>{if(show){setVisible(true);const timer=setTimeout(()=>{setVisible(false);setTimeout(onEnd,300);},3000);return()=>clearTimeout(timer);}},[show,onEnd]);return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-5 right-5 z-50 transition-all duration-300 ease-in-out \".concat(visible?'transform translate-x-0 opacity-100':'transform translate-x-full opacity-0'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(bgColor,\" backdrop-blur-sm text-white font-semibold py-3 px-5 rounded-lg shadow-2xl border \").concat(borderColor,\" flex items-center\"),children:[type==='success'?/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),message]})});};const HistoryPanel=_ref6=>{let{history,onSelect}=_ref6;return/*#__PURE__*/_jsxs(Card,{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsx(SectionTitle,{title:\"Analysis History\",description:\"Review your past analyses.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex-grow overflow-y-auto custom-scrollbar pr-2\",children:history.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 text-sm\",children:\"Your analysis history will appear here.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-3\",children:history.sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp)).map(item=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onSelect(item),className:\"w-full text-left p-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors duration-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-indigo-400 truncate\",children:item.query}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-400\",children:item.timestamp})]})},item.id))})})]});};// --- Auth Screen ---\nconst AuthScreen=()=>{const[mode,setMode]=useState('signIn');// 'signIn', 'register', 'forgot'\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[message,setMessage]=useState('');const handleAuthAction=async e=>{e.preventDefault();setIsLoading(true);setError('');setMessage('');try{if(mode==='signIn'){await signInWithEmailAndPassword(auth,email,password);}else if(mode==='register'){const userCredential=await createUserWithEmailAndPassword(auth,email,password);await sendEmailVerification(userCredential.user);setMessage(\"Registration successful! A verification email has been sent.\");}else if(mode==='forgot'){await sendPasswordResetEmail(auth,email);setMessage(\"Password reset email sent. Please check your inbox.\");}}catch(err){if(err.code==='auth/invalid-credential'){setError(\"Invalid email or password. Please try again.\");}else if(err.code==='auth/email-already-in-use'){setError(\"This email is already registered. Please sign in.\");}else if(err.code==='auth/weak-password'){setError(\"Password is too weak. Please use at least 6 characters.\");}else{setError(err.message);}}setIsLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-900\",children:/*#__PURE__*/_jsxs(Card,{className:\"w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold text-slate-100\",children:\"Autonomous AI Worker\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400 mt-2\",children:[mode==='signIn'&&'Sign in to access your dashboard',mode==='register'&&'Create a new account',mode==='forgot'&&'Reset your password']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b border-slate-700 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('signIn');setError('');setMessage('');},className:\"flex-1 py-2 text-sm font-semibold \".concat(mode==='signIn'?'text-indigo-400 border-b-2 border-indigo-400':'text-slate-400'),children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('register');setError('');setMessage('');},className:\"flex-1 py-2 text-sm font-semibold \".concat(mode==='register'?'text-indigo-400 border-b-2 border-indigo-400':'text-slate-400'),children:\"Register\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"bg-red-500/20 text-red-300 text-sm p-3 rounded-md mb-4\",children:error}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"bg-green-500/20 text-green-300 text-sm p-3 rounded-md mb-4\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAuthAction,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-slate-300 mb-1\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,className:\"w-full bg-gray-700/80 border border-slate-600 rounded-md py-2 px-3 focus:outline-none focus:ring-indigo-500\"})]}),mode!=='forgot'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-slate-300 mb-1\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',id:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"w-full bg-gray-700/80 border border-slate-600 rounded-md py-2 px-3 focus:outline-none focus:ring-indigo-500 pr-10\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPassword(!showPassword),className:\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-200\",children:showPassword?/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88\"})}):/*#__PURE__*/_jsxs(\"svg\",{className:\"h-5 w-5\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"})]})})]})]}),/*#__PURE__*/_jsxs(PrimaryButton,{type:\"submit\",isLoading:isLoading,children:[mode==='signIn'&&'Sign In',mode==='register'&&'Register',mode==='forgot'&&'Send Reset Email']})]}),mode==='signIn'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('forgot');setError('');setMessage('');},className:\"text-sm text-indigo-400 hover:underline\",children:\"Forgot Password?\"})})]})});};// --- Main Dashboard ---\nconst Dashboard=_ref7=>{let{user,onLogout}=_ref7;const[file,setFile]=useState(null);const[topic,setTopic]=useState('');const[stockSymbol,setStockSymbol]=useState('');const[rawData,setRawData]=useState(null);const[currentAnalysis,setCurrentAnalysis]=useState(null);const[history,setHistory]=useState([]);const[isLoadingData,setIsLoadingData]=useState(false);const[isAnalyzing,setIsAnalyzing]=useState(false);const[error,setError]=useState('');const[notification,setNotification]=useState({show:false,message:'',type:'success'});useEffect(()=>{if(!(user!==null&&user!==void 0&&user.uid))return;const historyCollectionPath=\"/artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/history\");const q=query(collection(db,historyCollectionPath));const unsubscribe=onSnapshot(q,querySnapshot=>{const historyData=[];querySnapshot.forEach(doc=>{historyData.push(_objectSpread({id:doc.id},doc.data()));});setHistory(historyData);},err=>{console.error(\"Error fetching history:\",err);showNotification(\"Could not load analysis history.\",'error');});return()=>unsubscribe();},[user]);const showNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotification({show:true,message,type});};const parseAiResponse=text=>{if(!text||typeof text!=='string'){return{summary:'No content returned from AI.',insights:[]};}text=text.trim();let summary='';let insights=[];const insightsHeader=\"Key Insights:\";const summaryHeader=\"Summary:\";const insightsIndex=text.indexOf(insightsHeader);if(insightsIndex!==-1){summary=text.substring(0,insightsIndex).trim();const insightsText=text.substring(insightsIndex+insightsHeader.length).trim();insights=insightsText.split('\\n').map(item=>item.replace(/^\\d+\\.\\s*/,'').trim()).filter(Boolean);}else{summary=text;}if(summary.startsWith(summaryHeader)){summary=summary.substring(summaryHeader.length).trim();}if(!summary&&insights.length===0){return{summary:text,insights:[]};}return{summary,insights};};const API_BASE_URL=\"https://autonomous-ai-knowledge-worker.onrender.com\";const handleApiCall=async(endpoint,params,query)=>{setIsLoadingData(true);setError('');setRawData(null);setCurrentAnalysis(null);try{const response=await axios.get(\"\".concat(API_BASE_URL).concat(endpoint),{params});setRawData({data:response.data,query});showNotification(\"Data source loaded successfully!\");}catch(err){var _err$response,_err$response$data;let errorMessage=\"An error occurred: \".concat(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message,\".\");if(err.code==='ERR_NETWORK'){errorMessage=\"Network request failed. Check if the backend server is running.\";}setError(errorMessage);console.error(err);}setIsLoadingData(false);};const handleFetchNews=()=>handleApiCall('/api/news',{topic},\"News: \".concat(topic));const handleFetchStockData=()=>handleApiCall('/api/stock',{symbol:stockSymbol},\"Stock: \".concat(stockSymbol));const handleAnalyzeWithAI=async()=>{if(!rawData){setError(\"No data to analyze.\");return;}setIsAnalyzing(true);setError('');try{const response=await axios.post('http://localhost:5000/api/analyze',{data:rawData.data});const text=response.data.analysis;const newAnalysis=_objectSpread({query:rawData.query,timestamp:new Date().toLocaleString()},parseAiResponse(text));setCurrentAnalysis(newAnalysis);// Save to history in the background without holding up the UI.\n// A catch is added to show a non-blocking notification on failure.\naddDoc(collection(db,\"/artifacts/\".concat(appId,\"/users/\").concat(user.uid,\"/history\")),newAnalysis).catch(dbError=>{console.error(\"Firestore save error:\",dbError);showNotification(\"Failed to save analysis to history.\",\"error\");});}catch(err){var _err$response2,_err$response2$data;setError(\"AI Analysis Error: \".concat(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message,\".\"));console.error(\"AI Analysis Error Details:\",err);}finally{// This ensures the spinner ALWAYS stops, even if there's an error.\nsetIsAnalyzing(false);}};const processFileUpload=()=>{if(!file){setError(\"Please select a file first.\");return;}setRawData({data:{status:\"File processed for pipeline (POC)\",fileName:file.name},query:\"File: \".concat(file.name)});showNotification(\"File \\\"\".concat(file.name,\"\\\" uploaded successfully!\"));};if(!user.emailVerified){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(Card,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-slate-100\",children:\"Please Verify Your Email\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400 mt-4\",children:[\"A verification link has been sent to \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-indigo-400\",children:user.email}),\". Please check your inbox and click the link to activate your account.\"]}),/*#__PURE__*/_jsx(PrimaryButton,{onClick:onLogout,className:\"mt-6\",children:\"Back to Sign In\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-indigo-900 via-indigo-800 to-indigo-700 min-h-screen text-white\",children:[/*#__PURE__*/_jsx(Notification,{message:notification.message,show:notification.show,onEnd:()=>setNotification({show:false,message:'',type:'success'}),type:notification.type}),/*#__PURE__*/_jsx(\"header\",{className:\"bg-indigo-900/90 backdrop-blur-md border-b border-indigo-700 p-6 shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold text-white tracking-wide\",children:\"AI Knowledge Worker\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-md text-indigo-300 mr-6 hidden sm:inline\",children:[\"Welcome, \",user.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,className:\"text-md font-semibold text-white hover:text-indigo-300 transition-colors duration-300\",children:\"Logout\"})]})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"p-6 sm:p-10 lg:p-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1 space-y-10\",children:[/*#__PURE__*/_jsxs(Card,{className:\"bg-indigo-800/70 border border-indigo-600 shadow-xl\",children:[/*#__PURE__*/_jsx(SectionTitle,{title:\"1. Choose Data Source\",description:\"Select a file or fetch from an API.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file-upload\",className:\"relative cursor-pointer bg-indigo-700/80 hover:bg-indigo-600 border-2 border-dashed border-indigo-500 rounded-xl p-8 flex flex-col justify-center items-center transition-colors duration-300\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-14 h-14 text-indigo-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 16a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v5a4 4 0 01-4 4H7z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 12v6m0 0l-3-3m3 3l3-3\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-3 text-base text-indigo-300 font-medium\",children:file?file.name:\"Click to upload a document\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",type:\"file\",className:\"sr-only\",onChange:e=>setFile(e.target.files[0])})]}),/*#__PURE__*/_jsx(PrimaryButton,{onClick:processFileUpload,isDisabled:!file,className:\"mt-6 text-base py-3 rounded-lg shadow-lg\",children:\"Use Uploaded File\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative my-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full border-t border-indigo-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-indigo-800 px-3 text-sm text-indigo-400\",children:\"OR\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"news-topic\",className:\"block text-sm font-medium text-indigo-300 mb-2\",children:\"News Topic\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"news-topic\",value:topic,onChange:e=>setTopic(e.target.value),placeholder:\"e.g., 'AI advancements'\",className:\"w-full bg-indigo-700/80 border border-indigo-600 rounded-lg py-3 px-4 text-indigo-200 placeholder-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500\"}),/*#__PURE__*/_jsx(PrimaryButton,{onClick:handleFetchNews,isLoading:isLoadingData,isDisabled:!topic,className:\"mt-4 text-base py-3 rounded-lg shadow-lg\",children:\"Fetch News\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stock-symbol\",className:\"block text-sm font-medium text-indigo-300 mb-2\",children:\"Stock Symbol\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"stock-symbol\",value:stockSymbol,onChange:e=>setStockSymbol(e.target.value.toUpperCase()),placeholder:\"e.g., 'AAPL'\",className:\"w-full bg-indigo-700/80 border border-indigo-600 rounded-lg py-3 px-4 text-indigo-200 placeholder-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500\"}),/*#__PURE__*/_jsx(PrimaryButton,{onClick:handleFetchStockData,isLoading:isLoadingData,isDisabled:!stockSymbol,className:\"mt-4 text-base py-3 rounded-lg shadow-lg\",children:\"Fetch Stock Info\"})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"bg-indigo-800/70 border border-indigo-600 shadow-xl\",children:[/*#__PURE__*/_jsx(SectionTitle,{title:\"2. Generate Insights\",description:\"Analyze the selected data source.\"}),/*#__PURE__*/_jsx(PrimaryButton,{onClick:handleAnalyzeWithAI,isLoading:isAnalyzing,isDisabled:!rawData,className:\"mt-6 text-base py-3 rounded-lg shadow-lg\",children:\"Analyze with AI\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-10\",children:[/*#__PURE__*/_jsxs(Card,{className:\"min-h-[400px] bg-indigo-800/70 border border-indigo-600 shadow-xl\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-600/80 border border-red-500 text-red-200 text-sm rounded-lg p-5 mb-6\",children:error}),/*#__PURE__*/_jsx(FormattedAiAnalysis,{analysis:currentAnalysis,placeholder:\"Your AI-generated summary and key insights will appear here.\"})]}),/*#__PURE__*/_jsx(HistoryPanel,{history:history,onSelect:setCurrentAnalysis})]})]})})})]});};// --- Main App Component ---\nexport default function App(){const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setIsLoading(false);});return()=>unsubscribe();},[]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen flex items-center justify-center text-white\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 min-h-screen\",children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n                 @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');\\n                 body { font-family: 'Inter', sans-serif; }\\n                 .custom-scrollbar::-webkit-scrollbar { width: 8px; }\\n                 .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\\n                 .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #4a5568; border-radius: 4px; }\\n                 .custom-scrollbar::-webkit-scrollbar-thumb:hover { background-color: #718096; }\\n             \"}),user?/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:()=>signOut(auth)}):/*#__PURE__*/_jsx(AuthScreen,{})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","getAuth","onAuthStateChanged","signOut","createUserWithEmailAndPassword","signInWithEmailAndPassword","sendPasswordResetEmail","sendEmailVerification","collection","addDoc","query","onSnapshot","db","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","auth","appId","Card","_ref","children","className","concat","SectionTitle","_ref2","title","description","PrimaryButton","_ref3","onClick","isLoading","isDisabled","type","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","FormattedAiAnalysis","_ref4","analysis","placeholder","summary","insights","strokeLinecap","strokeLinejoin","length","map","insight","index","Notification","_ref5","message","show","onEnd","visible","setVisible","bgColor","borderColor","timer","setTimeout","clearTimeout","HistoryPanel","_ref6","history","onSelect","sort","a","b","Date","timestamp","item","id","AuthScreen","mode","setMode","email","setEmail","password","setPassword","showPassword","setShowPassword","setIsLoading","error","setError","setMessage","handleAuthAction","e","preventDefault","userCredential","user","err","code","onSubmit","htmlFor","value","onChange","target","required","Dashboard","_ref7","onLogout","file","setFile","topic","setTopic","stockSymbol","setStockSymbol","rawData","setRawData","currentAnalysis","setCurrentAnalysis","setHistory","isLoadingData","setIsLoadingData","isAnalyzing","setIsAnalyzing","notification","setNotification","uid","historyCollectionPath","q","unsubscribe","querySnapshot","historyData","forEach","doc","push","_objectSpread","data","console","showNotification","arguments","undefined","parseAiResponse","text","trim","insightsHeader","summaryHeader","insightsIndex","indexOf","substring","insightsText","split","replace","filter","Boolean","startsWith","API_BASE_URL","handleApiCall","endpoint","params","response","get","_err$response","_err$response$data","errorMessage","handleFetchNews","handleFetchStockData","symbol","handleAnalyzeWithAI","post","newAnalysis","toLocaleString","catch","dbError","_err$response2","_err$response2$data","processFileUpload","status","fileName","name","emailVerified","files","toUpperCase","App","setUser","currentUser"],"sources":["C:/Users/91798/OneDrive/Desktop/Documents/worker_AII/worker_AII/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { \r\n    getAuth, \r\n    onAuthStateChanged, \r\n    signOut,\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword,\r\n    sendPasswordResetEmail,\r\n    sendEmailVerification\r\n} from \"firebase/auth\";\r\nimport { collection, addDoc, query, onSnapshot } from \"firebase/firestore\";\r\n\r\nimport { db } from './firebase-config';\r\n\r\nconst auth = getAuth();\r\nconst appId = \"1:431921606057:web:30852dac5f99835792e8b8\"; // Use the appId from firebase-config.js\r\n\r\n// --- Helper & UI Components ---\r\n\r\nconst Card = ({ children, className = '' }) => (\r\n  <div className={`bg-gray-800/50 backdrop-blur-sm border border-slate-700 rounded-xl shadow-lg p-6 ${className}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst SectionTitle = ({ title, description }) => (\r\n  <div>\r\n    <h2 className=\"text-xl font-bold text-slate-100\">{title}</h2>\r\n    <p className=\"text-sm text-slate-400 mt-1\">{description}</p>\r\n  </div>\r\n);\r\n\r\nconst PrimaryButton = ({ onClick, children, isLoading, isDisabled = false, className = '', type = 'button' }) => (\r\n  <button\r\n    type={type}\r\n    onClick={onClick}\r\n    disabled={isLoading || isDisabled}\r\n    className={`w-full flex justify-center items-center bg-indigo-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:bg-indigo-700 disabled:bg-indigo-400/50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-gray-900 transition-all duration-300 ${className}`}\r\n  >\r\n    {isLoading ? (\r\n      <>\r\n        <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n        </svg>\r\n        Processing...\r\n      </>\r\n    ) : (\r\n      children\r\n    )}\r\n  </button>\r\n);\r\n\r\nconst FormattedAiAnalysis = ({ analysis, placeholder }) => {\r\n    if (!analysis || !analysis.summary) {\r\n        return <div className=\"text-slate-500 h-full flex items-center justify-center text-center p-4\">{placeholder}</div>;\r\n    }\r\n\r\n    const { summary, insights, query } = analysis;\r\n\r\n    return (\r\n        <div>\r\n            <h3 className=\"text-xl font-semibold text-slate-100 mb-6 border-b border-slate-700 pb-3\">\r\n                Analysis for: <span className=\"text-indigo-400\">{query}</span>\r\n            </h3>\r\n\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center mb-3\">\r\n                    <svg className=\"w-6 h-6 text-indigo-400 mr-3\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" /></svg>\r\n                    <h4 className=\"text-lg font-semibold text-slate-200\">Summary</h4>\r\n                </div>\r\n                <p className=\"text-slate-400 leading-relaxed pl-9\">{summary}</p>\r\n            </div>\r\n\r\n            {insights && insights.length > 0 && (\r\n                <div>\r\n                    <div className=\"flex items-center mb-4\">\r\n                        <svg className=\"w-6 h-6 text-indigo-400 mr-3\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" /></svg>\r\n                        <h4 className=\"text-lg font-semibold text-slate-200\">Key Insights</h4>\r\n                    </div>\r\n                    <ul className=\"space-y-4 pl-9\">\r\n                        {insights.map((insight, index) => (\r\n                            <li key={index} className=\"flex items-start\">\r\n                                <span className=\"bg-indigo-500/20 text-indigo-300 font-bold rounded-full h-6 w-6 flex items-center justify-center mr-4 mt-0.5 flex-shrink-0\">{index + 1}</span>\r\n                                <span className=\"text-slate-300\">{insight}</span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Notification = ({ message, show, onEnd, type = 'success' }) => {\r\n    const [visible, setVisible] = useState(false);\r\n    const bgColor = type === 'success' ? 'bg-green-500/80' : 'bg-red-500/80';\r\n    const borderColor = type === 'success' ? 'border-green-400' : 'border-red-400';\r\n\r\n    useEffect(() => {\r\n        if (show) {\r\n            setVisible(true);\r\n            const timer = setTimeout(() => {\r\n                setVisible(false);\r\n                setTimeout(onEnd, 300);\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [show, onEnd]);\r\n\r\n    return (\r\n        <div className={`fixed top-5 right-5 z-50 transition-all duration-300 ease-in-out ${visible ? 'transform translate-x-0 opacity-100' : 'transform translate-x-full opacity-0'}`}>\r\n            <div className={`${bgColor} backdrop-blur-sm text-white font-semibold py-3 px-5 rounded-lg shadow-2xl border ${borderColor} flex items-center`}>\r\n                 {type === 'success' ? (\r\n                    <svg className=\"w-5 h-5 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                ) : (\r\n                    <svg className=\"w-5 h-5 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                )}\r\n                {message}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst HistoryPanel = ({ history, onSelect }) => (\r\n    <Card className=\"h-full flex flex-col\">\r\n        <SectionTitle title=\"Analysis History\" description=\"Review your past analyses.\" />\r\n        <div className=\"mt-4 flex-grow overflow-y-auto custom-scrollbar pr-2\">\r\n            {history.length === 0 ? (\r\n                <p className=\"text-slate-500 text-sm\">Your analysis history will appear here.</p>\r\n            ) : (\r\n                <ul className=\"space-y-3\">\r\n                    {history.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).map((item) => (\r\n                        <li key={item.id}>\r\n                            <button onClick={() => onSelect(item)} className=\"w-full text-left p-3 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors duration-200\">\r\n                                <p className=\"font-semibold text-indigo-400 truncate\">{item.query}</p>\r\n                                <p className=\"text-xs text-slate-400\">{item.timestamp}</p>\r\n                            </button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    </Card>\r\n);\r\n\r\n// --- Auth Screen ---\r\nconst AuthScreen = () => {\r\n    const [mode, setMode] = useState('signIn'); // 'signIn', 'register', 'forgot'\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleAuthAction = async (e) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setError('');\r\n        setMessage('');\r\n\r\n        try {\r\n            if (mode === 'signIn') {\r\n                await signInWithEmailAndPassword(auth, email, password);\r\n            } else if (mode === 'register') {\r\n                const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n                await sendEmailVerification(userCredential.user);\r\n                setMessage(\"Registration successful! A verification email has been sent.\");\r\n            } else if (mode === 'forgot') {\r\n                await sendPasswordResetEmail(auth, email);\r\n                setMessage(\"Password reset email sent. Please check your inbox.\");\r\n            }\r\n        } catch (err) {\r\n            if (err.code === 'auth/invalid-credential') {\r\n                setError(\"Invalid email or password. Please try again.\");\r\n            } else if (err.code === 'auth/email-already-in-use') {\r\n                setError(\"This email is already registered. Please sign in.\");\r\n            } else if (err.code === 'auth/weak-password') {\r\n                setError(\"Password is too weak. Please use at least 6 characters.\");\r\n            } else {\r\n                setError(err.message);\r\n            }\r\n        }\r\n        setIsLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-900\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <div className=\"text-center mb-6\">\r\n                    <h1 className=\"text-3xl font-extrabold text-slate-100\">Autonomous AI Worker</h1>\r\n                    <p className=\"text-slate-400 mt-2\">\r\n                        {mode === 'signIn' && 'Sign in to access your dashboard'}\r\n                        {mode === 'register' && 'Create a new account'}\r\n                        {mode === 'forgot' && 'Reset your password'}\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"flex border-b border-slate-700 mb-6\">\r\n                    <button onClick={() => {setMode('signIn'); setError(''); setMessage('');}} className={`flex-1 py-2 text-sm font-semibold ${mode === 'signIn' ? 'text-indigo-400 border-b-2 border-indigo-400' : 'text-slate-400'}`}>Sign In</button>\r\n                    <button onClick={() => {setMode('register'); setError(''); setMessage('');}} className={`flex-1 py-2 text-sm font-semibold ${mode === 'register' ? 'text-indigo-400 border-b-2 border-indigo-400' : 'text-slate-400'}`}>Register</button>\r\n                </div>\r\n                \r\n                {error && <p className=\"bg-red-500/20 text-red-300 text-sm p-3 rounded-md mb-4\">{error}</p>}\r\n                {message && <p className=\"bg-green-500/20 text-green-300 text-sm p-3 rounded-md mb-4\">{message}</p>}\r\n\r\n                <form onSubmit={handleAuthAction} className=\"space-y-6\">\r\n                    <div>\r\n                        <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-300 mb-1\">Email Address</label>\r\n                        <input type=\"email\" id=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required className=\"w-full bg-gray-700/80 border border-slate-600 rounded-md py-2 px-3 focus:outline-none focus:ring-indigo-500\" />\r\n                    </div>\r\n                    {mode !== 'forgot' && (\r\n                        <div>\r\n                            <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-300 mb-1\">Password</label>\r\n                            <div className=\"relative\">\r\n                                <input \r\n                                    type={showPassword ? 'text' : 'password'} \r\n                                    id=\"password\" \r\n                                    value={password} \r\n                                    onChange={(e) => setPassword(e.target.value)} \r\n                                    required \r\n                                    className=\"w-full bg-gray-700/80 border border-slate-600 rounded-md py-2 px-3 focus:outline-none focus:ring-indigo-500 pr-10\" \r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-200\"\r\n                                >\r\n                                    {showPassword ? (\r\n                                        <svg className=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88\" /></svg>\r\n                                    ) : (\r\n                                        <svg className=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <PrimaryButton type=\"submit\" isLoading={isLoading}>\r\n                        {mode === 'signIn' && 'Sign In'}\r\n                        {mode === 'register' && 'Register'}\r\n                        {mode === 'forgot' && 'Send Reset Email'}\r\n                    </PrimaryButton>\r\n                </form>\r\n\r\n                {mode === 'signIn' && (\r\n                    <div className=\"text-center mt-4\">\r\n                        <button onClick={() => {setMode('forgot'); setError(''); setMessage('');}} className=\"text-sm text-indigo-400 hover:underline\">Forgot Password?</button>\r\n                    </div>\r\n                )}\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Main Dashboard ---\r\nconst Dashboard = ({ user, onLogout }) => {\r\n    const [file, setFile] = useState(null);\r\n    const [topic, setTopic] = useState('');\r\n    const [stockSymbol, setStockSymbol] = useState('');\r\n\r\n    const [rawData, setRawData] = useState(null);\r\n    const [currentAnalysis, setCurrentAnalysis] = useState(null);\r\n    const [history, setHistory] = useState([]);\r\n\r\n    const [isLoadingData, setIsLoadingData] = useState(false);\r\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [notification, setNotification] = useState({ show: false, message: '', type: 'success' });\r\n\r\n    useEffect(() => {\r\n        if (!user?.uid) return;\r\n        const historyCollectionPath = `/artifacts/${appId}/users/${user.uid}/history`;\r\n        const q = query(collection(db, historyCollectionPath));\r\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n            const historyData = [];\r\n            querySnapshot.forEach((doc) => {\r\n                historyData.push({ id: doc.id, ...doc.data() });\r\n            });\r\n            setHistory(historyData);\r\n        }, (err) => {\r\n            console.error(\"Error fetching history:\", err);\r\n            showNotification(\"Could not load analysis history.\", 'error');\r\n        });\r\n        return () => unsubscribe();\r\n    }, [user]);\r\n    \r\n    const showNotification = (message, type = 'success') => {\r\n        setNotification({ show: true, message, type });\r\n    };\r\n\r\n    const parseAiResponse = (text) => {\r\n        if (!text || typeof text !== 'string') {\r\n            return { summary: 'No content returned from AI.', insights: [] };\r\n        }\r\n\r\n        text = text.trim();\r\n        let summary = '';\r\n        let insights = [];\r\n\r\n        const insightsHeader = \"Key Insights:\";\r\n        const summaryHeader = \"Summary:\";\r\n\r\n        const insightsIndex = text.indexOf(insightsHeader);\r\n\r\n        if (insightsIndex !== -1) {\r\n            summary = text.substring(0, insightsIndex).trim();\r\n            const insightsText = text.substring(insightsIndex + insightsHeader.length).trim();\r\n            insights = insightsText.split('\\n').map(item => item.replace(/^\\d+\\.\\s*/, '').trim()).filter(Boolean);\r\n        } else {\r\n            summary = text;\r\n        }\r\n\r\n        if (summary.startsWith(summaryHeader)) {\r\n            summary = summary.substring(summaryHeader.length).trim();\r\n        }\r\n\r\n        if (!summary && insights.length === 0) {\r\n            return { summary: text, insights: [] };\r\n        }\r\n\r\n        return { summary, insights };\r\n    };\r\n\r\nconst API_BASE_URL = \"https://autonomous-ai-knowledge-worker.onrender.com\";\r\n\r\nconst handleApiCall = async (endpoint, params, query) => {\r\n        setIsLoadingData(true);\r\n        setError('');\r\n        setRawData(null);\r\n        setCurrentAnalysis(null);\r\n        try {\r\n            const response = await axios.get(`${API_BASE_URL}${endpoint}`, { params });\r\n\r\n            setRawData({ data: response.data, query });\r\n            showNotification(\"Data source loaded successfully!\");\r\n        } catch (err) {\r\n            let errorMessage = `An error occurred: ${err.response?.data?.error || err.message}.`;\r\n            if (err.code === 'ERR_NETWORK') {\r\n                errorMessage = \"Network request failed. Check if the backend server is running.\";\r\n            }\r\n            setError(errorMessage);\r\n            console.error(err);\r\n        }\r\n        setIsLoadingData(false);\r\n    };\r\n\r\n    const handleFetchNews = () => handleApiCall('/api/news', { topic }, `News: ${topic}`);\r\n\r\n    const handleFetchStockData = () => handleApiCall('/api/stock', { symbol: stockSymbol }, `Stock: ${stockSymbol}`);\r\n    \r\n    const handleAnalyzeWithAI = async () => {\r\n        if (!rawData) { setError(\"No data to analyze.\"); return; }\r\n        setIsAnalyzing(true);\r\n        setError('');\r\n        \r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/analyze', { data: rawData.data });\r\n            const text = response.data.analysis;\r\n            const newAnalysis = {\r\n                query: rawData.query,\r\n                timestamp: new Date().toLocaleString(),\r\n                ...parseAiResponse(text)\r\n            };\r\n            \r\n            setCurrentAnalysis(newAnalysis);\r\n            \r\n            // Save to history in the background without holding up the UI.\r\n            // A catch is added to show a non-blocking notification on failure.\r\n            addDoc(collection(db, `/artifacts/${appId}/users/${user.uid}/history`), newAnalysis)\r\n                .catch(dbError => {\r\n                    console.error(\"Firestore save error:\", dbError);\r\n                    showNotification(\"Failed to save analysis to history.\", \"error\");\r\n                });\r\n\r\n        } catch (err) {\r\n            setError(`AI Analysis Error: ${err.response?.data?.error || err.message}.`);\r\n            console.error(\"AI Analysis Error Details:\", err);\r\n        } finally {\r\n            // This ensures the spinner ALWAYS stops, even if there's an error.\r\n            setIsAnalyzing(false);\r\n        }\r\n    };\r\n\r\n    const processFileUpload = () => {\r\n        if (!file) { setError(\"Please select a file first.\"); return; }\r\n        setRawData({\r\n            data: { status: \"File processed for pipeline (POC)\", fileName: file.name },\r\n            query: `File: ${file.name}`\r\n        });\r\n        showNotification(`File \"${file.name}\" uploaded successfully!`);\r\n    };\r\n    \r\n    if (!user.emailVerified) {\r\n        return (\r\n            <div className=\"bg-gray-900 min-h-screen flex items-center justify-center\">\r\n                <Card className=\"text-center\">\r\n                    <h2 className=\"text-2xl font-bold text-slate-100\">Please Verify Your Email</h2>\r\n                    <p className=\"text-slate-400 mt-4\">A verification link has been sent to <span className=\"font-semibold text-indigo-400\">{user.email}</span>. Please check your inbox and click the link to activate your account.</p>\r\n                    <PrimaryButton onClick={onLogout} className=\"mt-6\">Back to Sign In</PrimaryButton>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n      <div className=\"bg-gradient-to-r from-indigo-900 via-indigo-800 to-indigo-700 min-h-screen text-white\">\r\n        <Notification message={notification.message} show={notification.show} onEnd={() => setNotification({ show: false, message: '', type: 'success' })} type={notification.type} />\r\n\r\n        <header className=\"bg-indigo-900/90 backdrop-blur-md border-b border-indigo-700 p-6 shadow-lg\">\r\n            <div className=\"max-w-7xl mx-auto flex justify-between items-center\">\r\n                 <h1 className=\"text-3xl font-extrabold text-white tracking-wide\">AI Knowledge Worker</h1>\r\n                 <div>\r\n                    <span className=\"text-md text-indigo-300 mr-6 hidden sm:inline\">Welcome, {user.email}</span>\r\n                    <button onClick={onLogout} className=\"text-md font-semibold text-white hover:text-indigo-300 transition-colors duration-300\">Logout</button>\r\n                 </div>\r\n            </div>\r\n        </header>\r\n\r\n        <main className=\"p-6 sm:p-10 lg:p-12\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n                    {/* Left Column */}\r\n                    <div className=\"lg:col-span-1 space-y-10\">\r\n                        <Card className=\"bg-indigo-800/70 border border-indigo-600 shadow-xl\">\r\n                            <SectionTitle title=\"1. Choose Data Source\" description=\"Select a file or fetch from an API.\" />\r\n                            <div className=\"mt-6\">\r\n                                <label htmlFor=\"file-upload\" className=\"relative cursor-pointer bg-indigo-700/80 hover:bg-indigo-600 border-2 border-dashed border-indigo-500 rounded-xl p-8 flex flex-col justify-center items-center transition-colors duration-300\">\r\n                                    <svg className=\"w-14 h-14 text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v5a4 4 0 01-4 4H7z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 12v6m0 0l-3-3m3 3l3-3\" /></svg>\r\n                                    <span className=\"mt-3 text-base text-indigo-300 font-medium\">{file ? file.name : \"Click to upload a document\"}</span>\r\n                                </label>\r\n                                <input id=\"file-upload\" type=\"file\" className=\"sr-only\" onChange={(e) => setFile(e.target.files[0])} />\r\n                            </div>\r\n                            <PrimaryButton onClick={processFileUpload} isDisabled={!file} className=\"mt-6 text-base py-3 rounded-lg shadow-lg\">Use Uploaded File</PrimaryButton>\r\n                            \r\n                            <div className=\"relative my-8\"><div className=\"absolute inset-0 flex items-center\"><div className=\"w-full border-t border-indigo-600\" /></div><div className=\"relative flex justify-center\"><span className=\"bg-indigo-800 px-3 text-sm text-indigo-400\">OR</span></div></div>\r\n                            \r\n                            <div className=\"space-y-8\">\r\n                                <div>\r\n                                    <label htmlFor=\"news-topic\" className=\"block text-sm font-medium text-indigo-300 mb-2\">News Topic</label>\r\n                                    <input type=\"text\" id=\"news-topic\" value={topic} onChange={(e) => setTopic(e.target.value)} placeholder=\"e.g., 'AI advancements'\" className=\"w-full bg-indigo-700/80 border border-indigo-600 rounded-lg py-3 px-4 text-indigo-200 placeholder-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500\" />\r\n                                    <PrimaryButton onClick={handleFetchNews} isLoading={isLoadingData} isDisabled={!topic} className=\"mt-4 text-base py-3 rounded-lg shadow-lg\">Fetch News</PrimaryButton>\r\n                                </div>\r\n                                <div>\r\n                                    <label htmlFor=\"stock-symbol\" className=\"block text-sm font-medium text-indigo-300 mb-2\">Stock Symbol</label>\r\n                                    <input type=\"text\" id=\"stock-symbol\" value={stockSymbol} onChange={(e) => setStockSymbol(e.target.value.toUpperCase())} placeholder=\"e.g., 'AAPL'\" className=\"w-full bg-indigo-700/80 border border-indigo-600 rounded-lg py-3 px-4 text-indigo-200 placeholder-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500\" />\r\n                                    <PrimaryButton onClick={handleFetchStockData} isLoading={isLoadingData} isDisabled={!stockSymbol} className=\"mt-4 text-base py-3 rounded-lg shadow-lg\">Fetch Stock Info</PrimaryButton>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                         <Card className=\"bg-indigo-800/70 border border-indigo-600 shadow-xl\">\r\n                            <SectionTitle title=\"2. Generate Insights\" description=\"Analyze the selected data source.\" />\r\n                            <PrimaryButton onClick={handleAnalyzeWithAI} isLoading={isAnalyzing} isDisabled={!rawData} className=\"mt-6 text-base py-3 rounded-lg shadow-lg\">Analyze with AI</PrimaryButton>\r\n                         </Card>\r\n                    </div>\r\n\r\n                    {/* Right Column */}\r\n                    <div className=\"lg:col-span-2 space-y-10\">\r\n                        <Card className=\"min-h-[400px] bg-indigo-800/70 border border-indigo-600 shadow-xl\">\r\n                           {error && <div className=\"bg-red-600/80 border border-red-500 text-red-200 text-sm rounded-lg p-5 mb-6\">{error}</div>}\r\n                           <FormattedAiAnalysis analysis={currentAnalysis} placeholder=\"Your AI-generated summary and key insights will appear here.\" />\r\n                        </Card>\r\n                        <HistoryPanel history={history} onSelect={setCurrentAnalysis} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n      </div>\r\n    );\r\n};\r\n\r\n// --- Main App Component ---\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n            setUser(currentUser);\r\n            setIsLoading(false);\r\n        });\r\n        \r\n        return () => unsubscribe();\r\n    }, []);\r\n    \r\n    if (isLoading) {\r\n        return <div className=\"bg-gray-900 min-h-screen flex items-center justify-center text-white\">Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-gray-900 min-h-screen\">\r\n             <style>{`\r\n                 @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');\r\n                 body { font-family: 'Inter', sans-serif; }\r\n                 .custom-scrollbar::-webkit-scrollbar { width: 8px; }\r\n                 .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\r\n                 .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #4a5568; border-radius: 4px; }\r\n                 .custom-scrollbar::-webkit-scrollbar-thumb:hover { background-color: #718096; }\r\n             `}</style>\r\n            {user ? <Dashboard user={user} onLogout={() => signOut(auth)} /> : <AuthScreen />}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}